<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"></head><body><div id="upbtn">
  <button id="tsrg">Test Stroage</button> | <button id="save">Save</button> | <button id="read">Read</button>
</div>
<hr>
<div id="write">
  <div id="inputnum">
    COUNT FROM 1 TO ... <input id="num" type="text"> <button id="num-conf">Confirm!</button>
  </div>
  <div id="datain">
    Input here: <input id="input" type="text">
		<br>
		<button id="add-num">Add</button>
		<br>
		<button id="download">Download .csv file</button>
		<div id="csv"></div>
  </div>
  <div id="datashow">
  </div>
</div>
    	<style>#datain{
  width: 75%;
  float: left;
  display: none
}

#datashow{
  width: 25%;
  float: right;
  display: none
}</style>
	    		<script>x = undefined
xlen = 0

function e(id) {
  return document.getElementById(id)
}

function testStroage() {
  if ( window.LocalStroage )
    return true
  else
    return false
}

function tsr(){
  if ( testStroage() == false )
    alert("LocalStroage is not supported :(");
  else
    alert("LocalStroage is supported. Yay!");
}

function initList(num){
	xlen = num;
	num = Number(num);
	x = new Array(num+1);
	for ( i=0;i<=xlen+1;i++ ){
		x[i] = 0;
	}
}

function refreshLR(){
	e('num').value = ""

	y = ""
		for (i=1;i<=xlen;i++) {
			y = y + "# " + i + " : " + x[i];
		  y = y + "<br />";
		}
	e('datashow').innerHTML = y;
}

function addNum(){
	num = e('input').value;
	num = Number(num);
	x[num] = x[num] + 1;
	refreshLR();
	e('input').value = "";
	e('input').focus();
}
function getBlob(){
	y = ""
		for (i=1;i<=xlen;i++) {
			y = y + i + " ," + x[i];
		  y = y + "\r\n";
		}
	blob = new Blob( [y] , { type: 'text/comma-separated-values' } );
	url =  URL.createObjectURL(blob);
	e('csv').innerHTML = "<a download='count.csv' href=' " + url + " '>Download CSV</a>";
}
function numconfirmed(){
	e('inputnum').style.display = "none";
	initList( Number(e('num').value) );
	e('datain').style.display = "block";
	e('datashow').style.display = "block";
}


e('tsrg').addEventListener("click", tsr);
e('num-conf').addEventListener("click", numconfirmed);
e('add-num').addEventListener("click", addNum);
e('download').addEventListener("click", getBlob);</script>
	
<!-- Generated by RunJS (Fri Jun 23 16:32:47 CST 2017) 1ms --></body></html>
